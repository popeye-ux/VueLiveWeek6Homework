(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af1e5d92"],{"0b42":function(e,t,c){var n=c("da84"),a=c("e8b5"),o=c("68ee"),r=c("861d"),i=c("b622"),l=i("species"),s=n.Array;e.exports=function(e){var t;return a(e)&&(t=e.constructor,o(t)&&(t===s||a(t.prototype))?t=void 0:r(t)&&(t=t[l],null===t&&(t=void 0))),void 0===t?s:t}},"1dde":function(e,t,c){var n=c("d039"),a=c("b622"),o=c("2d00"),r=a("species");e.exports=function(e){return o>=51||!n((function(){var t=[],c=t.constructor={};return c[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,c){var n=c("0b42");e.exports=function(e,t){return new(n(e))(0===t?0:t)}},"6be2":function(e,t,c){"use strict";var n=function(e){return{all:e=e||new Map,on:function(t,c){var n=e.get(t);n?n.push(c):e.set(t,[c])},off:function(t,c){var n=e.get(t);n&&(c?n.splice(n.indexOf(c)>>>0,1):e.set(t,[]))},emit:function(t,c){var n=e.get(t);n&&n.slice().map((function(e){e(c)})),(n=e.get("*"))&&n.slice().map((function(e){e(t,c)}))}}},a=n();t["a"]=a},8418:function(e,t,c){"use strict";var n=c("a04b"),a=c("9bf2"),o=c("5c6c");e.exports=function(e,t,c){var r=n(t);r in e?a.f(e,r,o(0,c)):e[r]=c}},"99af":function(e,t,c){"use strict";var n=c("23e7"),a=c("da84"),o=c("d039"),r=c("e8b5"),i=c("861d"),l=c("7b0b"),s=c("07fa"),d=c("8418"),u=c("65f0"),b=c("1dde"),m=c("b622"),p=c("2d00"),f=m("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",j=a.TypeError,O=p>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),v=b("concat"),V=function(e){if(!i(e))return!1;var t=e[f];return void 0!==t?!!t:r(e)},N=!O||!v;n({target:"Array",proto:!0,forced:N},{concat:function(e){var t,c,n,a,o,r=l(this),i=u(r,0),b=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?r:arguments[t],V(o)){if(a=s(o),b+a>h)throw j(g);for(c=0;c<a;c++,b++)c in o&&d(i,b,o[c])}else{if(b>=h)throw j(g);d(i,b++,o)}return i.length=b,i}})},cc55:function(e,t,c){"use strict";c.r(t);c("99af");var n=c("7a23"),a=Object(n["createElementVNode"])("div",{class:"container-fluid mt-3 p-0"},[Object(n["createElementVNode"])("div",{class:"headPic-cart d-flex align-items-center justify-content-center"},[Object(n["createElementVNode"])("span",{class:"head-title"},"Cart")])],-1),o={class:"container mb-7"},r={class:"text-end pt-5"},i=["disabled"],l={class:"table align-middle mt-3",style:{"padding-right":"0","padding-left":"0"}},s=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{style:{width:"150px"}}),Object(n["createElementVNode"])("th",{class:"text-start"},"產品名稱"),Object(n["createElementVNode"])("th",{class:"text-center",style:{width:"200px"}},"數量/單位"),Object(n["createElementVNode"])("th",{class:"text-center"},"單價"),Object(n["createElementVNode"])("th",{class:"text-end"},"合計"),Object(n["createElementVNode"])("th",{class:"text-center"},"刪除")])],-1),d={class:"text-center"},u={class:"input-group input-group-sm"},b={class:"input-group mb-3"},m=["onUpdate:modelValue","onChange","disabled"],p=["value"],f={class:"input-group-text",id:"basic-addon2"},h={class:"text-center"},g={class:"text-end"},j={class:"text-center"},O=["onClick"],v=Object(n["createElementVNode"])("i",{class:"bi bi-trash"},null,-1),V=[v],N={colspan:"6",class:"text-end text-danger fw-bolder pt-3"},E={class:"fw-bolder"},y=Object(n["createElementVNode"])("td",null,null,-1),x={class:"d-flex justify-content-between"},w=Object(n["createTextVNode"])("繼續選購"),C=Object(n["createTextVNode"])("下一步");function k(e,t,c,v,k,L){var D=Object(n["resolveComponent"])("Loading"),A=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(D,{active:k.isLoading,"z-index":1060},null,8,["active"]),a,Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("button",{class:"btn btn-outline-danger",type:"button",disabled:0===k.cartData.carts.length,onClick:t[0]||(t[0]=function(){return L.removeAllCart&&L.removeAllCart.apply(L,arguments)})}," 清空購物車 ",8,i)]),Object(n["createElementVNode"])("table",l,[s,Object(n["createElementVNode"])("tbody",null,[k.cartData.carts.length?(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],{key:0},Object(n["renderList"])(k.cartData.carts,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t.id},[Object(n["createElementVNode"])("td",d,[Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])([{height:"150px","background-size":"cover","background-position":"center center"},{backgroundImage:"url(".concat(t.product.imageUrl,")")}])},null,4)]),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.product.title),1),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("div",b,[Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return L.updateCartItem(t)},disabled:k.isLoadingItem===t.id},[(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(20,(function(e){return Object(n["createElementVNode"])("option",{value:e,key:"".concat(e).concat(t.id)},Object(n["toDisplayString"])(e),9,p)})),64))],40,m),[[n["vModelSelect"],t.qty]]),Object(n["createElementVNode"])("span",f,Object(n["toDisplayString"])(t.product.unit),1)])])]),Object(n["createElementVNode"])("td",h,Object(n["toDisplayString"])(e.$filters.currency(t.product.price))+"元 ",1),Object(n["createElementVNode"])("td",g,Object(n["toDisplayString"])(e.$filters.currency(t.total))+" 元",1),Object(n["createElementVNode"])("td",j,[Object(n["createElementVNode"])("button",{type:"button",class:"btn text-danger fs-4",onClick:function(e){return L.removeCartItem(t.id)}},V,8,O)])])})),128)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("tfoot",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("td",N,[Object(n["createElementVNode"])("h3",E," 總價 "+Object(n["toDisplayString"])(e.$filters.currency(k.cartData.total))+"元 ",1)]),y])])]),Object(n["createElementVNode"])("div",x,[Object(n["createVNode"])(A,{to:"/products",class:"btn more-btn btn-lg mt-3 fw-bolder"},{default:Object(n["withCtx"])((function(){return[w]})),_:1}),Object(n["createVNode"])(A,{to:"/orderinform",class:Object(n["normalizeClass"])(["btn add-btn btn-lg mt-3 fw-bolder",{disabled:0===k.cartData.carts.length}])},{default:Object(n["withCtx"])((function(){return[C]})),_:1},8,["class"])])])],64)}c("d3b7");var L=c("6be2"),D={data:function(){return{cartData:{carts:[]},isLoadingItem:"",isLoading:!1,originPriceTotal:0}},methods:{getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("popeye","/cart");this.$http.get(t).then((function(t){console.log(t),e.cartData=t.data.data;var c=e.cartData.carts,n=c.reduce((function(e,t){return e+parseInt(t.product.origin_price)*parseInt(t.qty)}),0);e.originalPriceTotal=n,e.isLoading=!1})).catch((function(e){console.log(e.message)}))},removeCartItem:function(e){var t=this;this.isLoadingItem=e;var c="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("popeye","/cart/").concat(e);this.isLoadingItem="",this.$http.delete(c).then((function(e){console.log(e),t.showAlert({icon:"success",title:"".concat(e.data.message)}),L["a"].emit("get-cart"),t.getCart()})).catch((function(e){t.showAlert({icon:"error",title:"".concat(e.message)})}))},updateCartItem:function(e){var t=this,c={product_id:e.id,qty:e.qty};this.isLoadingItem=e.id;var n="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("popeye","/cart/").concat(e.id);this.$http.put(n,{data:c}).then((function(e){t.getCart(),L["a"].emit("get-cart"),t.showAlert({icon:"success",title:"".concat(e.data.message)}),t.isLoadingItem=""})).catch((function(e){t.showAlert({icon:"error",title:"".concat(e.message)}),t.isLoadingItem=""}))},removeAllCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("popeye","/carts");this.$http.delete(t).then((function(t){e.showAlert({icon:"success",title:"".concat(t.data.message)}),e.getCart(),L["a"].emit("get-cart"),e.isLoading=!1})).catch((function(e){alert(e.data.message)}))},showAlert:function(e){this.$swal(e)}},mounted:function(){this.getCart(),window.scroll(0,0)}},A=c("6b0d"),I=c.n(A);const B=I()(D,[["render",k]]);t["default"]=B},e8b5:function(e,t,c){var n=c("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}}}]);
//# sourceMappingURL=chunk-af1e5d92.6f5884e3.js.map